# @hidoo/gulp-plugin-compress

> Plugin to compress text data for gulp.

## Installation

```sh
npm install --save-dev gulp @hidoo/gulp-plugin-compress
```

## Usage

```js
import gulp from 'gulp';
import compress from '@hidoo/gulp-plugin-compress';

export const compressTask = () =>
  gulp.src('/path/to/src').pipe(compress()).pipe(gulp.dest('/path/to/dest'));
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### compressors

Mapping of promisified compressor.

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

#### Properties

- `gzip` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)<[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)>** gzip compressor function
- `brotli` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)<[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)>** brotli compressor function

#### Examples

```javascript
import fs from 'node:fs/promises';
import { compressors } from '@hidoo/gulp-plugin-compress';

const buffer = await fs.readFile('./path/to/file.ext');
const compressed = await compressors.gzip(buffer);
```

#### gzip

#### brotli

### defaultOptions

Default options.

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

#### gzip

#### brotli

#### append

#### keepExtname

#### targetExtnames

#### verbose

### compress

Generate compressed files.

#### Parameters

- `options` **[defaultOptions](#defaultoptions)** option (optional, default `{}`)

  - `options.gzip` **([Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | gzipOptions)** gzip compression options (optional, default `gzipOptions`)
  - `options.brotli` **([Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | brotliOptions)** brotli compression options (optional, default `brotliOptions`)
  - `options.append` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** append compressed files before original files whether or not (optional, default `true`)
  - `options.keepExtname` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** keep original extension name whether or not (like: example.html.gz) (optional, default `true`)
  - `options.targetExtnames` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** list of target extension names to compress (optional, default `['.html','.css','.js','.svg','.txt']`)
  - `options.verbose` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** output log whether or not (optional, default `false`)

#### Examples

```javascript
import gulp from 'gulp';
import compress from '@hidoo/gulp-plugin-compress';

export const compressTask = () =>
  gulp
    .src('/path/to/src')
    .pipe(
      compress({
        gzip: true,
        brotli: false,
        append: false,
        keepExtname: false,
        targetExtnames: ['.html', '.css', '.js'],
        verbose: true
      })
    )
    .pipe(gulp.dest('/path/to/dest'));
```

## Test

```sh
pnpm test
```

## License

MIT
