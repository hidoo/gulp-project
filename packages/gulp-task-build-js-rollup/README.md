# @hidoo/gulp-task-build-js-rollup

> Task that build javascript by rollup.js for gulp.

## Installation

```sh
$ npm install --save-dev gulp@next @babel/{core,polyfill,preset-env} @hidoo/gulp-task-build-js-rollup
```

## Usage

```js
import { task } from 'gulp';
import buildJs from '@hidoo/gulp-task-build-js-rollup';

task(
  'js',
  buildJs({
    src: '/path/to/js/main.js',
    dest: '/path/to/dest'
  })
);
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### buildJs

return javascript build task by rollup.js

#### Parameters

- `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** options (optional, default `{}`)

  - `options.name` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** task name (use as displayName) (optional, default `'build:js'`)
  - `options.src` **([Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)> | [String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String))** source path
  - `options.dest` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** destination path
  - `options.filename` **([Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)> | [String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String))** destination filename (optional, default `'main.js'`)
  - `options.suffix` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** suffix when compressed (optional, default `'.min'`)
  - `options.targets` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** target browsers.
    see: [default target browsers](http://browserl.ist/?q=%3E+0.5%25+in+JP%2C+ie%3E%3D+10%2C+android+%3E%3D+4.4)
  - `options.browsers` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** alias of options.targets.
  - `options.inputOptions` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** input options for rollup.js.
    see: [Merged with this function](./src/inputOptions.js).
    see: [inputOptions in JavaScript API of rollup.js](https://rollupjs.org/javascript-api/#inputoptions-object)
  - `options.outputOptions` **([Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)> | [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object))?** output options for rollup.js.
    see: [Merged with this function](./src/outputOptions.js).
    see: [outputOptions in JavaScript API of rollup.js](https://rollupjs.org/javascript-api/#outputoptions-object)
  - `options.verbose` **[Boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** out log or not (optional, default `false`)

#### Examples

```javascript
import { task } from 'gulp';
import buildJs from '@hidoo/gulp-task-build-js-rollup';

task(
  'js',
  buildJs({
    name: 'js:main',
    src: '/path/to/js/main.js',
    dest: '/path/to/dest',
    suffix: '.compressed',
    targets: ['> 0.1% in JP'],
    inputOptions: {},
    outputOptions: [
      {
        format: 'es',
        file: 'main.es.js'
      },
      {
        format: 'system',
        file: 'main.system.js'
      }
    ],
    compress: true,
    verbose: true
  })
);
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)<[Stream](https://nodejs.org/api/stream.html)>**&#x20;

## Test

```sh
$ pnpm test
```

## License

MIT
